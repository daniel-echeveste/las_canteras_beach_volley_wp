import{G as p,r as g,j as e,S as b,x as f,A as j}from"./app-B1aaPueH.js";import{A as v}from"./AdminLayout-RR20rO9n.js";import"./NavLink-CvGtknp-.js";import"./transition-BNwpWODH.js";function C({auth:n,post:i}){const{data:s,setData:d,errors:l,processing:c}=p({title:i.title,content:i.content,image:null,is_published:i.is_published,post_type:i.post_type||"noticia",event_date:i.event_date?i.event_date.substring(0,16):"",contact_email:i.contact_email||"",form_fields:i.form_fields||[],_method:"PUT"}),[a,o]=g.useState({name:"",label:"",type:"text",required:!1,options:[]}),m=t=>{t.preventDefault(),j.post(route("admin.posts.update",i.id),s)},x=()=>{a.name&&a.label&&(d("form_fields",[...s.form_fields,{...a}]),o({name:"",label:"",type:"text",required:!1,options:[]}))},u=t=>{const r=s.form_fields.filter((y,h)=>h!==t);d("form_fields",r)};return e.jsxs(v,{user:n.user,header:e.jsx("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:"Editar Post"}),children:[e.jsx(b,{title:"Admin - Editar Post"}),e.jsx("div",{className:"py-12",children:e.jsx("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:e.jsx("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-lg",children:e.jsx("div",{className:"p-6 text-gray-900",children:e.jsxs("form",{onSubmit:m,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tipo de Post"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",value:"noticia",checked:s.post_type==="noticia",onChange:t=>d("post_type",t.target.value),className:"mr-2"}),"Noticia"]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",value:"evento",checked:s.post_type==="evento",onChange:t=>d("post_type",t.target.value),className:"mr-2"}),"Evento"]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",value:"torneo",checked:s.post_type==="torneo",onChange:t=>d("post_type",t.target.value),className:"mr-2"}),"Torneo"]})]}),l.post_type&&e.jsx("div",{className:"text-red-500 text-sm mt-1",children:l.post_type})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Título"}),e.jsx("input",{type:"text",value:s.title,onChange:t=>d("title",t.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"}),l.title&&e.jsx("div",{className:"text-red-500 text-sm mt-1",children:l.title})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Contenido"}),e.jsx("textarea",{value:s.content,onChange:t=>d("content",t.target.value),rows:"10",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"}),l.content&&e.jsx("div",{className:"text-red-500 text-sm mt-1",children:l.content})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Imagen"}),i.image_path&&e.jsx("div",{className:"mb-2",children:e.jsx("img",{src:`/storage/${i.image_path}`,alt:"Current",className:"h-32 object-cover rounded"})}),e.jsx("input",{type:"file",onChange:t=>d("image",t.target.files[0]),className:"mt-1 block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-indigo-50 file:text-indigo-700 hover:file:bg-indigo-100"}),l.image&&e.jsx("div",{className:"text-red-500 text-sm mt-1",children:l.image})]}),s.post_type==="evento"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Fecha del Evento"}),e.jsx("input",{type:"datetime-local",value:s.event_date,onChange:t=>d("event_date",t.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"}),l.event_date&&e.jsx("div",{className:"text-red-500 text-sm mt-1",children:l.event_date})]}),s.post_type==="torneo"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Email de Contacto"}),e.jsx("input",{type:"email",value:s.contact_email,onChange:t=>d("contact_email",t.target.value),placeholder:"email@ejemplo.com",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"}),l.contact_email&&e.jsx("div",{className:"text-red-500 text-sm mt-1",children:l.contact_email})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Campos del Formulario de Inscripción"}),s.form_fields.length>0&&e.jsx("div",{className:"mb-4 space-y-2",children:s.form_fields.map((t,r)=>e.jsxs("div",{className:"flex items-center justify-between bg-gray-50 p-3 rounded",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:t.label}),e.jsxs("span",{className:"text-sm text-gray-500 ml-2",children:["(",t.type,")"]}),t.required&&e.jsx("span",{className:"text-red-500 ml-2",children:"*"})]}),e.jsx("button",{type:"button",onClick:()=>u(r),className:"text-red-600 hover:text-red-800",children:"Eliminar"})]},r))}),e.jsxs("div",{className:"bg-blue-50 p-4 rounded space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Nombre del Campo"}),e.jsx("input",{type:"text",value:a.name,onChange:t=>o({...a,name:t.target.value}),placeholder:"nombre_completo",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Etiqueta"}),e.jsx("input",{type:"text",value:a.label,onChange:t=>o({...a,label:t.target.value}),placeholder:"Nombre Completo",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Tipo"}),e.jsxs("select",{value:a.type,onChange:t=>o({...a,type:t.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",children:[e.jsx("option",{value:"text",children:"Texto"}),e.jsx("option",{value:"email",children:"Email"}),e.jsx("option",{value:"phone",children:"Teléfono"}),e.jsx("option",{value:"textarea",children:"Área de Texto"}),e.jsx("option",{value:"select",children:"Selección"})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:a.required,onChange:t=>o({...a,required:t.target.checked}),className:"mr-2"}),"Campo obligatorio"]})})]}),a.type==="select"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Opciones (separadas por coma)"}),e.jsx("input",{type:"text",onChange:t=>o({...a,options:t.target.value.split(",").map(r=>r.trim())}),placeholder:"Opción 1, Opción 2, Opción 3",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"})]}),e.jsx("button",{type:"button",onClick:x,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Añadir Campo"})]})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:s.is_published,onChange:t=>d("is_published",t.target.checked),className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"}),e.jsx("label",{className:"ml-2 block text-sm text-gray-900",children:"Publicar inmediatamente"})]}),e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx(f,{href:route("admin.posts.index"),className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300",children:"Cancelar"}),e.jsx("button",{type:"submit",disabled:c,className:"px-4 py-2 bg-[#1CA9C9] text-white rounded-md hover:bg-[#158BA8] disabled:opacity-50",children:"Actualizar"})]})]})})})})})]})}export{C as default};

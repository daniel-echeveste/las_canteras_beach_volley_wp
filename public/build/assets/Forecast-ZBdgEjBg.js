import{r as m,j as e,S as D}from"./app-B1aaPueH.js";import{N as S}from"./Navbar-DI3JNp93.js";function k(){const[r,f]=m.useState(null),[w,b]=m.useState(!0),[l,y]=m.useState(0),[i,u]=m.useState(null);m.useEffect(()=>{(async()=>{try{const n=await(await fetch("https://api.open-meteo.com/v1/forecast?latitude=28.128&longitude=-15.433&current=temperature_2m,relative_humidity_2m,apparent_temperature,is_day,precipitation,weather_code,wind_speed_10m,wind_direction_10m,uv_index&hourly=temperature_2m,weather_code,wind_speed_10m,wind_direction_10m,uv_index,is_day&daily=weather_code,sunrise,sunset,uv_index_max,precipitation_sum,wind_speed_10m_max&timezone=auto")).json();f(n)}catch(a){console.error("Error fetching weather data:",a)}finally{b(!1)}})()},[]);const h=t=>t===0?"â˜€ï¸":t>=1&&t<=3?"â›…":t>=45&&t<=48?"ðŸŒ«ï¸":t>=51&&t<=55||t>=61&&t<=67?"ðŸŒ§ï¸":t>=71&&t<=77?"â„ï¸":t>=80&&t<=82?"ðŸŒ¦ï¸":t>=95&&t<=99?"â›ˆï¸":"â“",v=t=>({0:"Despejado",1:"Mayormente despejado",2:"Parcialmente nublado",3:"Nublado",45:"Niebla",48:"Niebla con escarcha",51:"Llovizna ligera",53:"Llovizna moderada",55:"Llovizna densa",61:"Lluvia ligera",63:"Lluvia moderada",65:"Lluvia fuerte",80:"Chubascos ligeros",81:"Chubascos moderados",82:"Chubascos violentos",95:"Tormenta"})[t]||"Desconocido",j=t=>["N","NE","E","SE","S","SW","W","NW"][Math.round(t/45)%8],o=t=>t<15?{label:"Leve",color:"text-green-500",icon:"ðŸ˜Œ",bg:"bg-green-50"}:t<30?{label:"Moderado",color:"text-blue-500",icon:"ðŸ˜",bg:"bg-blue-50"}:{label:"Fuerte",color:"text-red-500",icon:"ðŸ˜µ",bg:"bg-red-50"},d=t=>t<2?{color:"text-green-500",warning:null,bg:"bg-green-50"}:t<5?{color:"text-yellow-500",warning:null,bg:"bg-yellow-50"}:t<7?{color:"text-orange-500",warning:"Â¡Ponte crema!",bg:"bg-orange-50"}:{color:"text-red-500",warning:"Â¡Ponte crema!",bg:"bg-red-50"},x=t=>new Date(t).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),N=()=>{if(!r)return null;if(i){const n=r.hourly.time.indexOf(i);if(n!==-1)return{type:"hourly",timeLabel:`${new Date(i).toLocaleDateString("es-ES",{weekday:"long"})} ${x(i)}`,temp:r.hourly.temperature_2m[n],code:r.hourly.weather_code[n],windSpeed:r.hourly.wind_speed_10m[n],windDir:r.hourly.wind_direction_10m[n]||0,uv:r.hourly.uv_index[n],isDay:r.hourly.is_day[n],sunInfo:null}}if(l===0)return{type:"current",timeLabel:"Ahora mismo",temp:r.current.temperature_2m,code:r.current.weather_code,windSpeed:r.current.wind_speed_10m,windDir:r.current.wind_direction_10m,uv:r.daily.uv_index_max[0],uv:r.current.uv_index,isDay:r.current.is_day,sunInfo:_(new Date)};const a=r.daily.time[l];return{type:"daily",timeLabel:new Date(a).toLocaleDateString("es-ES",{weekday:"long",day:"numeric",month:"long"}),temp:null,code:r.daily.weather_code[l],windSpeed:r.daily.wind_speed_10m_max[l],windDir:null,uv:r.daily.uv_index_max[l],isDay:1,sunInfo:`Amanecer: ${x(r.daily.sunrise[l])} - Puesta: ${x(r.daily.sunset[l])}`}},_=t=>{if(!r||!r.daily)return"";const a=new Date(r.daily.sunset[0]),n=new Date(r.daily.sunrise[0]);if(t>a)return"AnocheciÃ³";if(t<n)return"Amanece pronto";const c=a-t,p=Math.floor(c/(1e3*60*60)),g=Math.floor(c%(1e3*60*60)/(1e3*60));return`${p}h ${g}m de sol`},s=N();return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx(D,{title:"PrevisiÃ³n MeteorolÃ³gica"}),e.jsx(S,{}),e.jsxs("main",{className:"pt-24 pb-12 px-4 sm:px-6 lg:px-8 max-w-3xl mx-auto",children:[e.jsx("div",{className:"mb-6 text-center",children:e.jsxs("h1",{className:"text-3xl font-extrabold text-gray-900",children:["PrevisiÃ³n ",e.jsx("span",{className:"text-[#1CA9C9]",children:"Las Canteras"})]})}),w||!s?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#1CA9C9]"})}):e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"bg-white rounded-3xl shadow-xl overflow-hidden border border-gray-100 relative",children:[e.jsxs("div",{className:`p-8 text-center relative overflow-hidden ${s.isDay?"bg-gradient-to-b from-blue-400 to-blue-200":"bg-gradient-to-b from-indigo-900 to-purple-800"}`,children:[e.jsxs("div",{className:"relative z-10",children:[e.jsx("h2",{className:"text-white/90 font-medium text-lg uppercase tracking-wider mb-2",children:s.timeLabel}),e.jsx("div",{className:"text-8xl mb-2 filter drop-shadow-lg animate-bounce-slow",children:h(s.code)}),s.temp!==null&&e.jsxs("div",{className:"text-6xl font-bold text-white drop-shadow-md",children:[Math.round(s.temp),"Â°"]}),e.jsx("p",{className:"text-white/90 text-xl font-medium mt-2",children:v(s.code)})]}),e.jsx("div",{className:"absolute top-0 left-0 w-64 h-64 bg-white/10 rounded-full -translate-x-1/2 -translate-y-1/2 blur-2xl"}),e.jsx("div",{className:"absolute bottom-0 right-0 w-64 h-64 bg-white/10 rounded-full translate-x-1/2 translate-y-1/2 blur-2xl"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 divide-y sm:divide-y-0 sm:divide-x divide-gray-100",children:[e.jsxs("div",{className:`p-6 flex flex-col items-center justify-center transition-colors ${o(s.windSpeed).bg}`,children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("span",{className:`text-3xl ${o(s.windSpeed).color}`,children:o(s.windSpeed).icon}),e.jsx("span",{className:"text-gray-500 font-medium uppercase text-xs tracking-wider",children:"Viento"})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("span",{className:`text-2xl font-bold ${o(s.windSpeed).color}`,children:[s.windSpeed," ",e.jsx("span",{className:"text-sm text-gray-400 font-normal",children:"km/h"})]})}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[s.windDir!==null&&e.jsx("div",{className:"w-6 h-6 rounded-full bg-gray-200 flex items-center justify-center",style:{transform:`rotate(${s.windDir}deg)`},title:`DirecciÃ³n: ${s.windDir}Â°`,children:e.jsx("svg",{className:"w-4 h-4 text-gray-700",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M5.293 9.707a1 1 0 010-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 01-1.414 1.414L11 7.414V15a1 1 0 11-2 0V7.414L6.707 9.707a1 1 0 01-1.414 0z",clipRule:"evenodd"})})}),e.jsx("span",{className:`font-bold ${o(s.windSpeed).color}`,children:o(s.windSpeed).label}),s.windDir!==null&&e.jsx("span",{className:"text-gray-400 text-sm",children:j(s.windDir)})]})]}),e.jsxs("div",{className:`p-6 flex flex-col items-center justify-center transition-colors ${d(s.uv).bg}`,children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("svg",{className:`w-6 h-6 ${d(s.uv).color}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})}),e.jsx("span",{className:"text-gray-500 font-medium uppercase text-xs tracking-wider",children:"Ãndice UV"})]}),e.jsx("span",{className:`text-3xl font-bold ${d(s.uv).color}`,children:s.uv}),d(s.uv).warning&&e.jsx("span",{className:"mt-2 px-3 py-1 bg-red-100 text-red-600 text-xs font-bold rounded-full animate-pulse",children:d(s.uv).warning})]}),e.jsxs("div",{className:"p-6 flex flex-col items-center justify-center bg-yellow-50/50",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("svg",{className:"w-6 h-6 text-yellow-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("span",{className:"text-gray-500 font-medium uppercase text-xs tracking-wider",children:"Sol"})]}),e.jsx("span",{className:"text-lg font-bold text-gray-800 text-center",children:s.sunInfo||"---"})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-500 uppercase tracking-wider mb-3 ml-1",children:"DÃ­as"}),e.jsx("div",{className:"flex overflow-x-auto pb-4 gap-3 no-scrollbar snap-x",children:r.daily.time.map((t,a)=>{const n=l===a;return e.jsxs("button",{onClick:()=>{y(a),u(null)},className:`flex-shrink-0 snap-start flex flex-col items-center p-3 rounded-2xl border min-w-[90px] transition-all duration-200 ${n?"border-[#1CA9C9] bg-[#1CA9C9] text-white shadow-md transform scale-105":"border-gray-200 bg-white text-gray-600 hover:border-[#1CA9C9]/50 hover:bg-gray-50"}`,children:[e.jsx("span",{className:`text-xs font-medium mb-1 ${n?"text-white/80":"text-gray-400"}`,children:new Date(t).toLocaleDateString("es-ES",{weekday:"short"})}),e.jsx("span",{className:"text-xl font-bold",children:new Date(t).getDate()}),e.jsx("span",{className:"text-2xl mt-1",children:h(r.daily.weather_code[a])})]},t)})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-3 ml-1",children:[e.jsxs("h3",{className:"text-sm font-semibold text-gray-500 uppercase tracking-wider",children:["Por horas (",new Date(r.daily.time[l]).toLocaleDateString("es-ES",{weekday:"long"}),")"]}),i&&e.jsx("button",{onClick:()=>u(null),className:"text-xs text-[#1CA9C9] font-bold hover:underline",children:"Ver resumen"})]}),e.jsx("div",{className:"flex overflow-x-auto pb-4 gap-3 no-scrollbar snap-x",children:r.hourly.time.map((t,a)=>{const n=new Date(t),c=new Date(r.daily.time[l]);if(n.getDate()!==c.getDate()||n.getMonth()!==c.getMonth())return null;const p=i===t,g=l===0&&Math.abs(new Date-n)<36e5;return e.jsxs("button",{onClick:()=>u(t),className:`flex-shrink-0 snap-start flex flex-col items-center p-3 rounded-xl border min-w-[80px] transition-all ${p?"border-[#1CA9C9] bg-[#1CA9C9]/10 ring-2 ring-[#1CA9C9]":g?"border-gray-300 bg-gray-100":"border-gray-100 bg-white hover:border-gray-300"}`,children:[e.jsx("span",{className:"text-xs font-medium text-gray-500 mb-1",children:x(t)}),e.jsx("span",{className:"text-xl mb-1",children:h(r.hourly.weather_code[a])}),e.jsxs("span",{className:"text-sm font-bold text-gray-900",children:[Math.round(r.hourly.temperature_2m[a]),"Â°"]}),e.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[e.jsx("svg",{className:"w-3 h-3 text-gray-400",fill:"currentColor",viewBox:"0 0 20 20",style:{transform:`rotate(${r.hourly.wind_direction_10m[a]}deg)`},children:e.jsx("path",{fillRule:"evenodd",d:"M5.293 9.707a1 1 0 010-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 01-1.414 1.414L11 7.414V15a1 1 0 11-2 0V7.414L6.707 9.707a1 1 0 01-1.414 0z",clipRule:"evenodd"})}),e.jsx("span",{className:"text-[10px] text-gray-500",children:r.hourly.wind_speed_10m[a]})]})]},t)})})]})]})]})]})]})}export{k as default};

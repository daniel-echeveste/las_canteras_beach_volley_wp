import{G as g,r as b,j as e,S as p,x as f,A as j}from"./app-DRmdDcQa.js";import{A as v}from"./AdminLayout-CFr0C4_R.js";import"./NavLink-CDkCI-V5.js";import"./transition-Bp8muA3K.js";function C({auth:o,post:l}){const{data:s,setData:i,errors:a,processing:c}=g({title:l.title,content:l.content,image:null,is_published:l.is_published,post_type:l.post_type||"noticia",event_date:l.event_date?l.event_date.substring(0,16):"",has_form:l.has_form!==void 0?l.has_form:!0,contact_email:l.contact_email||"",email_subject:l.email_subject||"",form_fields:l.form_fields||[],_method:"PUT"}),[d,r]=b.useState({name:"",label:"",type:"text",required:!1,options:[]}),m=t=>{t.preventDefault(),j.post(route("admin.posts.update",l.id),s)},x=()=>{d.name&&d.label&&(i("form_fields",[...s.form_fields,{...d}]),r({name:"",label:"",type:"text",required:!1,options:[]}))},u=t=>{const n=s.form_fields.filter((y,h)=>h!==t);i("form_fields",n)};return e.jsxs(v,{user:o.user,header:e.jsx("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:"Editar Post"}),children:[e.jsx(p,{title:"Admin - Editar Post"}),e.jsx("div",{className:"py-12",children:e.jsx("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:e.jsx("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-lg",children:e.jsx("div",{className:"p-6 text-gray-900",children:e.jsxs("form",{onSubmit:m,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tipo de Post"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",value:"noticia",checked:s.post_type==="noticia",onChange:t=>i("post_type",t.target.value),className:"mr-2"}),"Noticia"]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",value:"evento",checked:s.post_type==="evento",onChange:t=>i("post_type",t.target.value),className:"mr-2"}),"Evento"]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",value:"torneo",checked:s.post_type==="torneo",onChange:t=>i("post_type",t.target.value),className:"mr-2"}),"Torneo"]})]}),a.post_type&&e.jsx("div",{className:"text-red-500 text-sm mt-1",children:a.post_type})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Título"}),e.jsx("input",{type:"text",value:s.title,onChange:t=>i("title",t.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"}),a.title&&e.jsx("div",{className:"text-red-500 text-sm mt-1",children:a.title})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Contenido"}),e.jsx("textarea",{value:s.content,onChange:t=>i("content",t.target.value),rows:"10",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"}),a.content&&e.jsx("div",{className:"text-red-500 text-sm mt-1",children:a.content})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Imagen"}),l.image_path&&e.jsx("div",{className:"mb-2",children:e.jsx("img",{src:`/storage/${l.image_path}`,alt:"Current",className:"h-32 object-cover rounded"})}),e.jsx("input",{type:"file",onChange:t=>i("image",t.target.files[0]),className:"mt-1 block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-indigo-50 file:text-indigo-700 hover:file:bg-indigo-100"}),a.image&&e.jsx("div",{className:"text-red-500 text-sm mt-1",children:a.image})]}),s.post_type==="evento"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Fecha del Evento"}),e.jsx("input",{type:"datetime-local",value:s.event_date,onChange:t=>i("event_date",t.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"}),a.event_date&&e.jsx("div",{className:"text-red-500 text-sm mt-1",children:a.event_date})]}),s.post_type==="torneo"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"has_form",checked:s.has_form,onChange:t=>i("has_form",t.target.checked),className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:"has_form",className:"ml-2 block text-sm text-gray-900",children:"Habilitar Formulario de Inscripción"})]}),s.has_form&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Email de Contacto"}),e.jsx("input",{type:"email",value:s.contact_email,onChange:t=>i("contact_email",t.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"}),a.contact_email&&e.jsx("div",{className:"text-red-500 text-sm mt-1",children:a.contact_email})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Asunto del Email"}),e.jsx("input",{type:"text",value:s.email_subject,onChange:t=>i("email_subject",t.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"}),a.email_subject&&e.jsx("div",{className:"text-red-500 text-sm mt-1",children:a.email_subject})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Campos del Formulario"}),s.form_fields.map((t,n)=>e.jsxs("div",{className:"flex items-center gap-2 mb-2 p-2 bg-gray-50 rounded",children:[e.jsxs("span",{className:"flex-1",children:[t.label," (",t.type,")"]}),e.jsx("button",{type:"button",onClick:()=>u(n),className:"px-2 py-1 bg-red-500 text-white text-sm rounded hover:bg-red-600",children:"Eliminar"})]},n)),e.jsxs("div",{className:"mt-4 p-4 border border-gray-300 rounded space-y-3",children:[e.jsx("h4",{className:"font-medium text-sm",children:"Añadir Campo"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600",children:"Nombre del Campo"}),e.jsx("input",{type:"text",value:d.name,onChange:t=>r({...d,name:t.target.value}),className:"mt-1 block w-full text-sm rounded-md border-gray-300"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600",children:"Etiqueta"}),e.jsx("input",{type:"text",value:d.label,onChange:t=>r({...d,label:t.target.value}),className:"mt-1 block w-full text-sm rounded-md border-gray-300"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600",children:"Tipo"}),e.jsxs("select",{value:d.type,onChange:t=>r({...d,type:t.target.value}),className:"mt-1 block w-full text-sm rounded-md border-gray-300",children:[e.jsx("option",{value:"text",children:"Texto"}),e.jsx("option",{value:"email",children:"Email"}),e.jsx("option",{value:"tel",children:"Teléfono"}),e.jsx("option",{value:"textarea",children:"Área de Texto"}),e.jsx("option",{value:"select",children:"Selección"})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:d.required,onChange:t=>r({...d,required:t.target.checked}),className:"h-4 w-4 text-indigo-600 rounded"}),e.jsx("label",{className:"ml-2 text-xs text-gray-600",children:"Requerido"})]})]}),e.jsx("button",{type:"button",onClick:x,className:"px-3 py-1 bg-indigo-500 text-white text-sm rounded hover:bg-indigo-600",children:"Añadir Campo"})]}),a.form_fields&&e.jsx("div",{className:"text-red-500 text-sm mt-1",children:a.form_fields})]})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:s.is_published,onChange:t=>i("is_published",t.target.checked),className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"}),e.jsx("label",{className:"ml-2 block text-sm text-gray-900",children:"Publicar inmediatamente"})]}),e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx(f,{href:route("admin.posts.index"),className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300",children:"Cancelar"}),e.jsx("button",{type:"submit",disabled:c,className:"px-4 py-2 bg-[#1CA9C9] text-white rounded-md hover:bg-[#158BA8] disabled:opacity-50",children:"Actualizar"})]})]})})})})})]})}export{C as default};
